import{_ as z}from"./ReNavBar-6f8c994e.js";import{F as E,m as G,p as M,c as W}from"./rules-8aabd117.js";import{b as A,c as H,d as J}from"./user-84e027d5.js";import{d as I,c as n,r as s,u as K,i as O,v as Q,x as X,j as Y,e as Z,f as e,t as y,w as u,o as w,n as C,q as k,y as ee,h as x,p as oe,l as ae,_ as te}from"./index-86cd2e39.js";import{_ as se}from"./CpIcon-5b319669.js";import{a as ne,s as b}from"./request-f0b19ab0.js";import{c as le,t as re,d as ie,w as ce,I as ue}from"./index-ae49f426.js";import{F as de}from"./index-f4dc98ed.js";import{C as _e}from"./index-add35b71.js";import{B as pe}from"./index-c99ac001.js";import"./use-placeholder-c21f4ba1.js";import"./use-route-9c17b307.js";import"./index-c25ce0bf.js";import"./use-id-4ffc8381.js";const[ve,me]=le("divider"),fe={dashed:Boolean,hairline:re,vertical:Boolean,contentPosition:ie("center")};var he=I({name:ve,props:fe,setup(a,{slots:t}){return()=>{var r;return n("div",{role:"separator",class:me({dashed:a.dashed,hairline:a.hairline,vertical:a.vertical,[`content-${a.contentPosition}`]:!!t.default&&!a.vertical})},[!a.vertical&&((r=t.default)==null?void 0:r.call(t))])}}});const ge=ce(he),ye="/assets/qq-7e9221ab.svg",d=a=>(oe("data-v-5478ec67"),a=a(),ae(),a),we={class:"login-page"},Ce={class:"login-head"},Ve={href:"javascript:;"},ke={class:"secondCodeClass"},xe={class:"cp-cell"},be=d(()=>e("span",null,"我已同意",-1)),Ie=d(()=>e("a",{href:"javascript:;"},"用户协议",-1)),Se=d(()=>e("span",null,"及",-1)),Be=d(()=>e("a",{href:"javascript:;"},"隐私条款",-1)),Ne={class:"cp-cell"},Pe=d(()=>e("div",{class:"cp-cell"},[e("a",{href:"javascript:;"},"忘记密码？")],-1)),Re={class:"login-other"},Ue=d(()=>e("div",{class:"icon"},[e("img",{src:ye,alt:""})],-1)),je=I({__name:"index",setup(a){const t=s(""),r=s(""),m=s(!1),S=K(),B=O(),N=Q(),i=s(!0),f=s("");s(0);const c=s(0),h=s(!0),V=s();let _;const v=s(!1),P=async()=>{if(m.value==!0){const p=i.value?await A(t.value,r.value):await H(t.value,f.value);S.setUser(p.data),ne("登录成功"),B.replace(N.query.returnUrl||"/user")}else b("请勾选用户协议")},R=()=>{i.value=!i.value},U=async()=>{var o;if(c.value>0)return;await((o=V.value)==null?void 0:o.validate("phoneNum"));const p=await J(t.value,"login");b({type:"success",message:`验证码是:${p.data.code}`,duration:5e3,className:"noticeWidth"}),h.value=!1,c.value=60,_&&clearInterval(_),_=setInterval(()=>{c.value--,c.value<0&&(clearInterval(_),h.value=!0)},1e3)};X(()=>{clearInterval(_)});const j=()=>{v.value=!v.value};return Y(()=>{t.value="13230000021",r.value="abc12345"}),(p,o)=>{const $=z,q=ue,g=de,F=_e,L=pe,T=E,D=ge;return w(),Z("div",we,[n($,{"right-text":"注册",onClickRight:o[0]||(o[0]=l=>p.$router.push("/register"))}),e("div",Ce,[e("h3",null,y(i.value?"密码登录":"短信验证码登录"),1),e("a",Ve,[e("span",{onClick:R},y(i.value?"短信验证码登录":"密码登录"),1),n(q,{name:"arrow"})])]),n(T,{autocomplete:"off",onSubmit:P,ref_key:"refSendCode",ref:V},{default:u(()=>[n(g,{modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=l=>t.value=l),placeholder:"请输入手机号",name:"phoneNum",type:"tel",rules:C(G)},null,8,["modelValue","rules"]),i.value?(w(),k(g,{key:0,placeholder:"请输入密码",type:v.value?"text":"password",modelValue:r.value,"onUpdate:modelValue":o[2]||(o[2]=l=>r.value=l),rules:C(M)},{button:u(()=>[n(se,{name:v.value?"login-eye-on":"login-eye-off",onClick:j},null,8,["name"])]),_:1},8,["type","modelValue","rules"])):(w(),k(g,{key:1,placeholder:"请输入验证码",type:"password",modelValue:f.value,"onUpdate:modelValue":o[3]||(o[3]=l=>f.value=l),rules:C(W)},{button:u(()=>[e("div",ke,[e("span",{onClick:U,class:ee({active:c.value>0})},y(h.value?"发送验证码":`${c.value}秒后再次发送`),3)])]),_:1},8,["modelValue","rules"])),e("div",xe,[n(F,{modelValue:m.value,"onUpdate:modelValue":o[4]||(o[4]=l=>m.value=l)},{default:u(()=>[be,Ie,Se,Be]),_:1},8,["modelValue"])]),e("div",Ne,[n(L,{block:"",round:"",type:"primary","native-type":"submit"},{default:u(()=>[x("登 录")]),_:1})]),Pe]),_:1},512),e("div",Re,[n(D,null,{default:u(()=>[x("第三方登录")]),_:1}),Ue])])}}});const Ke=te(je,[["__scopeId","data-v-5478ec67"]]);export{Ke as default};
