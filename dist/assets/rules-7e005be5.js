import{c as V,u as q,n as y,t as p,p as A,F as $,w as R}from"./index-9d0ba676.js";import{u as T}from"./request-47ac28f9.js";import{d as x,c as C}from"./index-75e781f0.js";const[I,M]=V("form"),N={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:y,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:p,showErrorMessage:p,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var _=x({name:I,props:N,emits:["submit","failed"],setup(o,{emit:l,slots:u}){const{children:n,linkChildren:h}=q($),i=e=>e?n.filter(t=>e.includes(t.name)):n,v=e=>new Promise((t,s)=>{const r=[];i(e).reduce((S,E)=>S.then(()=>{if(!r.length)return E.validate().then(g=>{g&&r.push(g)})}),Promise.resolve()).then(()=>{r.length?s(r):t()})}),b=e=>new Promise((t,s)=>{const r=i(e);Promise.all(r.map(a=>a.validate())).then(a=>{a=a.filter(Boolean),a.length?s(a):t()})}),w=e=>{const t=n.find(s=>s.name===e);return t?new Promise((s,r)=>{t.validate().then(a=>{a?r(a):s()})}):Promise.reject()},d=e=>typeof e=="string"?w(e):o.validateFirst?v(e):b(e),P=e=>{typeof e=="string"&&(e=[e]),i(e).forEach(s=>{s.resetValidation()})},B=()=>n.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),c=(e,t)=>{n.some(s=>s.name===e?(s.$el.scrollIntoView(t),!0):!1)},m=()=>n.reduce((e,t)=>(t.name!==void 0&&(e[t.name]=t.formValue.value),e),{}),f=()=>{const e=m();d().then(()=>l("submit",e)).catch(t=>{l("failed",{values:e,errors:t}),o.scrollToError&&t[0].name&&c(t[0].name)})},F=e=>{A(e),f()};return h({props:o}),T({submit:f,validate:d,getValues:m,scrollToField:c,resetValidation:P,getValidationStatus:B}),()=>{var e;return C("form",{class:M(),onSubmit:F},[(e=u.default)==null?void 0:e.call(u)])}}});const D=R(_),K=[{required:!0,message:"请填写手机号"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确"}],W=[{required:!0,message:"请输入密码"},{pattern:/^\w{8,24}$/,message:"密码需8-24个字符"}],X=[{required:!0,message:"请输入验证码"},{pattern:/^\d{6}$/,message:"密码需6个数字"}],Y=[{required:!0,message:"请输入姓名"},{pattern:/^(?:[\u4e00-\u9fa5·]{2,16})$/,message:"请输入正确的姓名，长度在2-16位字符"}],z=[{required:!0,message:"请输入身份证号"},{pattern:/^[1-9]\d{5}(?:18|19|20)\d{2}(?:0[1-9]|10|11|12)(?:0[1-9]|[1-2]\d|30|31)\d{3}[\dXx]$/,message:"请正确输入身份证号"}];export{D as F,z as a,X as c,K as m,W as p,Y as r};
