import{_ as B}from"./CpRadioBtn-ce7cfd98.js";import{_ as F}from"./CpIcon-85f3193e.js";import{_ as T}from"./ReNavBar-c95b3280.js";import{_ as L}from"./avatar-doctor-ce251225.js";import{b as U}from"./rapidConsultation-b5d3bd31.js";import{d as k,r as m,v as w,i as A,a as N,j as R,o as v,e as f,c as a,f as t,q as g,t as S,A as z,w as q,z as M,h as j,p as E,l as P,_ as G}from"./index-91c59e71.js";import{o as H,c as J}from"./constants-50076371.js";import{U as K}from"./index-2db49094.js";import{s as O}from"./request-3cf2d5e2.js";import{F as Q}from"./index-2bc0fa75.js";import{B as W}from"./index-2daf35a5.js";import"./use-placeholder-ecf850e8.js";import"./index-5d8f6571.js";import"./index-8a6aab93.js";import"./index-38dfc129.js";import"./use-route-956230c9.js";import"./index-61817de6.js";import"./use-id-8ec4f288.js";const i=u=>(E("data-v-608d6b1b"),u=u(),P(),u),X={class:"consult-illness-page"},Y={class:"illness-tip van-hairline--bottom"},Z=i(()=>t("img",{class:"img",src:L},null,-1)),$={class:"info"},ss=i(()=>t("p",{class:"tit"},"在线医生",-1)),es=i(()=>t("p",{class:"tip"}," 请描述你的疾病或症状、是否用药、就诊经历，需要我听过什么样的帮助 ",-1)),os={class:"safe"},ts=i(()=>t("span",null,"内容仅医生可见",-1)),ls={class:"illness-form"},ns={class:"item"},as=i(()=>t("p",null,"本次患病多久了？",-1)),is={class:"item"},us={class:"illness-img"},cs={key:0,class:"tip"},ps=k({__name:"ConsultIllness",setup(u){const s=m({illnessTime:1,consultFlag:0,illnessDesc:"",pictures:[]}),c=m([]),p=w(),h=A(),V=async o=>{Array.isArray(o)||o.file&&(o.status="uploading",o.message="上传中...",U(o.file).then(e=>{var l;console.log("上传成功"),(l=s.value.pictures)==null||l.push(e.data),o.url=e.data.url,o.status="done",o.message="上传成功"}).catch(()=>{console.log("上传失败"),o.status="failed",o.message="上传失败"}))},b=o=>{var e;console.log("删除了"),s.value.pictures=(e=s.value.pictures)==null?void 0:e.filter(l=>o.url!==l.url)},x=N(()=>!s.value.illnessDesc),y=()=>{if(!s.value.illnessDesc)return O("请输入病情描述");p.setInquiriesImagesText(s.value),h.push("/user/familyArchives?isChange=1")};return R(()=>{if(p.patientInformation.illnessDesc){const{illnessTime:o,consultFlag:e,illnessDesc:l,pictures:r}=p.patientInformation;s.value.illnessTime=o,s.value.consultFlag=e,s.value.illnessDesc=l,c.value=r||[]}}),(o,e)=>{var _;const l=T,r=F,C=Q,d=B,D=K,I=W;return v(),f("div",X,[a(l,{title:"图文问诊"}),t("div",Y,[Z,t("div",$,[ss,es,t("p",os,[a(r,{name:"consult-safe"}),ts])])]),t("div",ls,[a(C,{type:"textarea",rows:"3",modelValue:s.value.illnessDesc,"onUpdate:modelValue":e[0]||(e[0]=n=>s.value.illnessDesc=n),placeholder:"请详细描述您的病情，病情描述不能为空"},null,8,["modelValue"]),t("div",ns,[as,a(d,{optionList:g(H),modelValue:s.value.illnessTime,"onUpdate:modelValue":e[1]||(e[1]=n=>s.value.illnessTime=n)},null,8,["optionList","modelValue"])]),t("div",is,[t("p",null,"此次病情是否去医院就诊过?"+S((_=s.value.pictures)==null?void 0:_.length),1),a(d,{optionList:g(J),modelValue:s.value.consultFlag,"onUpdate:modelValue":e[2]||(e[2]=n=>s.value.consultFlag=n)},null,8,["optionList","modelValue"])]),t("div",us,[a(D,{"upload-text":"上传图片","upload-icon":"photo-o","max-count":"9","max-size":"5*1024*1024",modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=n=>c.value=n),"after-read":V,onDelete:b},null,8,["modelValue"]),c.value.length<=0?(v(),f("p",cs," 上传内容仅医生可见,最多9张图,最大5MB ")):z("",!0)]),a(I,{class:M({disabled:x.value}),onClick:y,type:"primary",block:"",round:""},{default:q(()=>[j(" 下一步 ")]),_:1},8,["class"])])])}}});const Ls=G(ps,[["__scopeId","data-v-608d6b1b"]]);export{Ls as default};
