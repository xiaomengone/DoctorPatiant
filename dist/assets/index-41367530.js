import{Q as Ne,L as He,d as H,r as C,E as he,a as B,O as $,C as P,c as g,j as be,R as We,J as Me,S as Ze,z as je,T as De,U as Ue,K as Ve,M as Fe,m as Ke,N as Xe,g as Ye,V as Qe}from"./index-91c59e71.js";import{O as ge,P as ee,Q as me,R as qe,s as Je,S as xe,c as W,n as O,d as ne,m as L,T as ae,U as ye,e as we,g as Ge,y as ie,V as Q,z,W as Te,X as pe,w as q,C as G,t as D,u as et,Y as tt,k as ce,E as te,B as nt,K as at,Z as de,b as it,j as lt,a as ot,_ as rt,h as ue}from"./index-5d8f6571.js";import{u as Se}from"./use-id-8ec4f288.js";import{u as J,L as st}from"./request-3cf2d5e2.js";import{c as ct,a as dt,r as ut}from"./use-route-956230c9.js";import{a as ft,S as vt}from"./index-8a6aab93.js";import{u as ht}from"./use-refs-fc566cfb.js";function bt(e,l,a){let o,d=0;const t=e.scrollLeft,r=a===0?1:Math.round(a*1e3/16);function u(){ge(o)}function f(){e.scrollLeft+=(l-t)/r,++d<r&&(o=ee(f))}return f(),u}function gt(e,l,a,o){let d,t=me(e);const r=t<l,u=a===0?1:Math.round(a*1e3/16),f=(l-t)/u;function m(){ge(d)}function y(){t+=f,(r&&t>l||!r&&t<l)&&(t=l),qe(e,t),r&&t<l||!r&&t>l?d=ee(y):o&&(d=ee(o))}return y(),m}function Ce(e,l){if(!Je||!window.IntersectionObserver)return;const a=new IntersectionObserver(t=>{l(t[0].intersectionRatio>0)},{root:document.body}),o=()=>{e.value&&a.observe(e.value)},d=()=>{e.value&&a.unobserve(e.value)};Ne(d),He(d),xe(o)}const[mt,xt]=W("sticky"),yt={zIndex:O,position:ne("top"),container:Object,offsetTop:L(0),offsetBottom:L(0)};var wt=H({name:mt,props:yt,emits:["scroll","change"],setup(e,{emit:l,slots:a}){const o=C(),d=ae(o),t=he({fixed:!1,width:0,height:0,transform:0}),r=C(!1),u=B(()=>ye(e.position==="top"?e.offsetTop:e.offsetBottom)),f=B(()=>{if(r.value)return;const{fixed:v,height:T,width:i}=t;if(v)return{width:`${i}px`,height:`${T}px`}}),m=B(()=>{if(!t.fixed||r.value)return;const v=we(Ge(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${u.value}px`});return t.transform&&(v.transform=`translate3d(0, ${t.transform}px, 0)`),v}),y=v=>l("scroll",{scrollTop:v,isFixed:t.fixed}),R=()=>{if(!o.value||Q(o))return;const{container:v,position:T}=e,i=z(o),x=me(window);if(t.width=i.width,t.height=i.height,T==="top")if(v){const s=z(v),k=s.bottom-u.value-t.height;t.fixed=u.value>i.top&&s.bottom>0,t.transform=k<0?k:0}else t.fixed=u.value>i.top;else{const{clientHeight:s}=document.documentElement;if(v){const k=z(v),h=s-k.top-u.value-t.height;t.fixed=s-u.value<i.bottom&&s>k.top,t.transform=h<0?-h:0}else t.fixed=s-u.value<i.bottom}y(x)};return $(()=>t.fixed,v=>l("change",v)),ie("scroll",R,{target:d,passive:!0}),Ce(o,R),$([Te,pe],()=>{!o.value||Q(o)||!t.fixed||(r.value=!0,P(()=>{const v=z(o);t.width=v.width,t.height=v.height,r.value=!1}))}),()=>{var v;return g("div",{ref:o,style:f.value},[g("div",{class:xt({fixed:t.fixed&&!r.value}),style:m.value},[(v=a.default)==null?void 0:v.call(a)])])}}});const Tt=q(wt),[St,fe]=W("tabs");var Ct=H({name:St,props:{count:G(Number),inited:Boolean,animated:Boolean,duration:G(O),swipeable:Boolean,lazyRender:Boolean,currentIndex:G(Number)},emits:["change"],setup(e,{emit:l,slots:a}){const o=C(),d=u=>l("change",u),t=()=>{var u;const f=(u=a.default)==null?void 0:u.call(a);return e.animated||e.swipeable?g(ft,{ref:o,loop:!1,class:fe("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:d},{default:()=>[f]}):f},r=u=>{const f=o.value;f&&f.state.active!==u&&f.swipeTo(u,{immediate:!e.inited})};return $(()=>e.currentIndex,r),be(()=>{r(e.currentIndex)}),J({swipeRef:o}),()=>g("div",{class:fe("content",{animated:e.animated||e.swipeable})},[t()])}});const[ke,Y]=W("tabs"),kt={type:ne("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:L(0),duration:L(.3),animated:Boolean,ellipsis:D,swipeable:Boolean,scrollspy:Boolean,offsetTop:L(0),background:String,lazyRender:D,lineWidth:O,lineHeight:O,beforeChange:Function,swipeThreshold:L(5),titleActiveColor:String,titleInactiveColor:String},Re=Symbol(ke);var Rt=H({name:ke,props:kt,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:l,slots:a}){let o,d,t,r,u;const f=C(),m=C(),y=C(),R=C(),v=Se(),T=ae(f),[i,x]=ht(),{children:s,linkChildren:k}=et(Re),h=he({inited:!1,position:"",lineStyle:{},currentIndex:-1}),M=B(()=>s.length>+e.swipeThreshold||!e.ellipsis||e.shrink),U=B(()=>({borderColor:e.color,background:e.background})),Z=(n,c)=>{var b;return(b=n.name)!=null?b:c},V=B(()=>{const n=s[h.currentIndex];if(n)return Z(n,h.currentIndex)}),E=B(()=>ye(e.offsetTop)),le=B(()=>e.sticky?E.value+o:0),j=n=>{const c=m.value,b=i.value;if(!M.value||!c||!b||!b[h.currentIndex])return;const S=b[h.currentIndex].$el,w=S.offsetLeft-(c.offsetWidth-S.offsetWidth)/2;r&&r(),r=bt(c,w,n?0:+e.duration)},_=()=>{const n=h.inited;P(()=>{const c=i.value;if(!c||!c[h.currentIndex]||e.type!=="line"||Q(f.value))return;const b=c[h.currentIndex].$el,{lineWidth:S,lineHeight:w}=e,I=b.offsetLeft+b.offsetWidth/2,A={width:ce(S),backgroundColor:e.color,transform:`translateX(${I}px) translateX(-50%)`};if(n&&(A.transitionDuration=`${e.duration}s`),te(w)){const X=ce(w);A.height=X,A.borderRadius=X}h.lineStyle=A})},Be=n=>{const c=n<h.currentIndex?-1:1;for(;n>=0&&n<s.length;){if(!s[n].disabled)return n;n+=c}},F=(n,c)=>{const b=Be(n);if(!te(b))return;const S=s[b],w=Z(S,b),I=h.currentIndex!==null;h.currentIndex!==b&&(h.currentIndex=b,c||j(),_()),w!==e.active&&(l("update:active",w),I&&l("change",w,S.title)),t&&!e.scrollspy&&at(Math.ceil(de(f.value)-E.value))},K=(n,c)=>{const b=s.find((w,I)=>Z(w,I)===n),S=b?s.indexOf(b):0;F(S,c)},oe=(n=!1)=>{if(e.scrollspy){const c=s[h.currentIndex].$el;if(c&&T.value){const b=de(c,T.value)-le.value;d=!0,u&&u(),u=gt(T.value,b,n?0:+e.duration,()=>{d=!1})}}},$e=(n,c,b)=>{const{title:S,disabled:w}=s[c],I=Z(s[c],c);w||(ct(e.beforeChange,{args:[I],done:()=>{F(c),oe()}}),dt(n)),l("clickTab",{name:I,title:S,event:b,disabled:w})},_e=n=>{t=n.isFixed,l("scroll",n)},Pe=n=>{P(()=>{K(n),oe(!0)})},ze=()=>{for(let n=0;n<s.length;n++){const{top:c}=z(s[n].$el);if(c>le.value)return n===0?0:n-1}return s.length-1},Ae=()=>{if(e.scrollspy&&!d){const n=ze();F(n)}},Le=()=>{if(e.type==="line"&&s.length)return g("div",{class:Y("line"),style:h.lineStyle},null)},re=()=>{var n,c,b;const{type:S,border:w,sticky:I}=e,A=[g("div",{ref:I?void 0:y,class:[Y("wrap"),{[nt]:S==="line"&&w}]},[g("div",{ref:m,role:"tablist",class:Y("nav",[S,{shrink:e.shrink,complete:M.value}]),style:U.value,"aria-orientation":"horizontal"},[(n=a["nav-left"])==null?void 0:n.call(a),s.map(X=>X.renderTitle($e)),Le(),(c=a["nav-right"])==null?void 0:c.call(a)])]),(b=a["nav-bottom"])==null?void 0:b.call(a)];return I?g("div",{ref:y},[A]):A},se=()=>{_(),P(()=>{var n,c;j(!0),(c=(n=R.value)==null?void 0:n.swipeRef.value)==null||c.resize()})};$(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],_),$(Te,se),$(()=>e.active,n=>{n!==V.value&&K(n)}),$(()=>s.length,()=>{h.inited&&(K(e.active),_(),P(()=>{j(!0)}))});const Oe=()=>{K(e.active,!0),P(()=>{h.inited=!0,y.value&&(o=z(y.value).height),j(!0)})},Ee=(n,c)=>l("rendered",n,c);return J({resize:se,scrollTo:Pe}),We(_),tt(_),xe(Oe),Ce(f,_),ie("scroll",Ae,{target:T,passive:!0}),k({id:v,props:e,setLine:_,scrollable:M,onRendered:Ee,currentName:V,setTitleRefs:x,scrollIntoView:j}),()=>g("div",{ref:f,class:Y([e.type])},[e.sticky?g(Tt,{container:f.value,offsetTop:E.value,onScroll:_e},{default:()=>[re()]}):re(),g(Ct,{ref:R,count:s.length,inited:h.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:h.currentIndex,onChange:F},{default:()=>{var n;return[(n=a.default)==null?void 0:n.call(a)]}})])}});const Ie=Symbol(),It=()=>Me(Ie,null),[Bt,ve]=W("tab"),$t=H({name:Bt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:O,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:D},setup(e,{slots:l}){const a=B(()=>{const d={},{type:t,color:r,disabled:u,isActive:f,activeColor:m,inactiveColor:y}=e;r&&t==="card"&&(d.borderColor=r,u||(f?d.backgroundColor=r:d.color=r));const v=f?m:y;return v&&(d.color=v),d}),o=()=>{const d=g("span",{class:ve("text",{ellipsis:!e.scrollable})},[l.title?l.title():e.title]);return e.dot||te(e.badge)&&e.badge!==""?g(it,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[d]}):d};return()=>g("div",{id:e.id,role:"tab",class:[ve([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:a.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[o()])}}),[_t,p]=W("tab"),Pt=we({},ut,{dot:Boolean,name:O,badge:O,title:String,disabled:Boolean,titleClass:lt,titleStyle:[String,Object],showZeroBadge:D});var zt=H({name:_t,props:Pt,setup(e,{slots:l}){const a=Se(),o=C(!1),d=Ye(),{parent:t,index:r}=ot(Re);if(!t)return;const u=()=>{var i;return(i=e.name)!=null?i:r.value},f=()=>{o.value=!0,t.props.lazyRender&&P(()=>{t.onRendered(u(),e.title)})},m=B(()=>{const i=u()===t.currentName.value;return i&&!o.value&&f(),i}),y=C(""),R=C("");Ze(()=>{const{titleClass:i,titleStyle:x}=e;y.value=i?je(i):"",R.value=x&&typeof x!="string"?De(Ue(x)):x});const v=i=>g($t,Ke({key:a,id:`${t.id}-${r.value}`,ref:t.setTitleRefs(r.value),style:R.value,class:y.value,isActive:m.value,controls:a,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:x=>i(d.proxy,r.value,x)},ue(t.props,["type","color","shrink"]),ue(e,["dot","badge","title","disabled","showZeroBadge"])),{title:l.title}),T=C(!m.value);return $(m,i=>{i?T.value=!1:rt(()=>{T.value=!0})}),$(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),Ve(Ie,m),J({id:a,renderTitle:v}),()=>{var i;const x=`${t.id}-${r.value}`,{animated:s,swipeable:k,scrollspy:h,lazyRender:M}=t.props;if(!l.default&&!s)return;const U=h||m.value;if(s||k)return g(vt,{id:a,role:"tabpanel",class:p("panel-wrapper",{inactive:T.value}),tabindex:m.value?0:-1,"aria-hidden":!m.value,"aria-labelledby":x},{default:()=>{var E;return[g("div",{class:p("panel")},[(E=l.default)==null?void 0:E.call(l)])]}});const V=o.value||h||!M?(i=l.default)==null?void 0:i.call(l):null;return Fe(g("div",{id:a,role:"tabpanel",class:p("panel"),tabindex:U?0:-1,"aria-labelledby":x},[V]),[[Xe,U]])}}});const Ut=q(zt),Vt=q(Rt),[At,N,Lt]=W("list"),Ot={error:Boolean,offset:L(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:ne("down"),loadingText:String,finishedText:String,immediateCheck:D};var Et=H({name:At,props:Ot,emits:["load","update:error","update:loading"],setup(e,{emit:l,slots:a}){const o=C(e.loading),d=C(),t=C(),r=It(),u=ae(d),f=B(()=>e.scroller||u.value),m=()=>{P(()=>{if(o.value||e.finished||e.disabled||e.error||(r==null?void 0:r.value)===!1)return;const{direction:i}=e,x=+e.offset,s=z(f);if(!s.height||Q(d))return;let k=!1;const h=z(t);i==="up"?k=s.top-h.top<=x:k=h.bottom-s.bottom<=x,k&&(o.value=!0,l("update:loading",!0),l("load"))})},y=()=>{if(e.finished){const i=a.finished?a.finished():e.finishedText;if(i)return g("div",{class:N("finished-text")},[i])}},R=()=>{l("update:error",!1),m()},v=()=>{if(e.error){const i=a.error?a.error():e.errorText;if(i)return g("div",{role:"button",class:N("error-text"),tabindex:0,onClick:R},[i])}},T=()=>{if(o.value&&!e.finished&&!e.disabled)return g("div",{class:N("loading")},[a.loading?a.loading():g(st,{class:N("loading-icon")},{default:()=>[e.loadingText||Lt("loading")]})])};return $(()=>[e.loading,e.finished,e.error],m),r&&$(r,i=>{i&&m()}),Qe(()=>{o.value=e.loading}),be(()=>{e.immediateCheck&&m()}),J({check:m}),ie("scroll",m,{target:f,passive:!0}),()=>{var i;const x=(i=a.default)==null?void 0:i.call(a),s=g("div",{ref:t,class:N("placeholder")},null);return g("div",{ref:d,role:"feed",class:N(),"aria-busy":o.value},[e.direction==="down"?x:s,T(),y(),v(),e.direction==="up"?x:s])}}});const Ft=q(Et);export{Ft as L,Vt as T,Ut as a};
